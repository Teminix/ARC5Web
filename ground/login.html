<!DOCTYPE html>
<html lang="" dir="ltr">
  <head>
    <meta charset="utf-8">
    <title></title>
    <link rel = "stylesheet" type = "text/css" href = "style.css" />
    <script src="js/jquery.js" charset="utf-8"></script>
    <script src="js/script.js" charset="utf-8"></script>
  </head>
  <body>
    <div class="navbar">
      <div class="item">
      <a href="index"> Home </a>
      </div>
      <div class="item">
        <a href="signup"> Sign up </a>
      </div>
      <div class="item">
        <a href="description">About Us</a>
      </div>
    </div>
    <br /><br />
    <div class="gyaf">
    <center> <div class="heading">
      Log In
    </div></center>
  <center><p class="subdivision">
    Please enter your details to login.
  </p></center>
  <br />
    <input type="text" name="email id" placeholder="Email ID"> <br />
    <input type="password" name="password" placeholder="Password"><br>
    <span class="prompt"></span>
<br /> <br />
  <button type="button" id="button">Enter</button>
</div>
<div class="copy">
  Copyright &copy; 2019 ARC 5
</div>
<script type="text/javascript">
let button = document.getElementById("button");
let form = document.getElementsByClassName("form")[0];
form.querySelectorAll("[name]").forEach(e=>{
  e.onkeypress = function(event){
    if (event.keyCode == 13) {
      button.onclick()
    }
  }
  // l(e.onkeypress)
})
let prompt = document.getElementsByClassName("prompt")[0];
button.onclick = function(){
  let dict = getFormData(form);
  l(dict)
  $.ajax({
      url:'/login',
      type:"POST",
      data: dict,
      success:function(data){
        prompt.style.color = "green";
        prompt.innerHTML = data;
        setTimeout(function(){
          window.location.href = "/dashboard";
        })
      },
      error:function(err){
        prompt.style.color = 'red';
        prompt.innerHTML = err.responseText;
      }
  })
}
  </body>
</html>
